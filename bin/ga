#!/usr/bin/env ruby

require 'ga/cli'
require 'gli'

include GLI::App

program_desc 'Google Analytics'

flag [:authfile], :default_value => File.join(ENV['HOME'],'.ga.auth.yaml')


desc 'Checks authentication file'
command :check do |c|
  c.action do |global,opts,args|
    unless File.exists? global[:authfile]
      info = GA::Cli::AUTH.verification_information
      STDERR.puts "Please visit #{info['verification_url']} and use this key: #{info['user_code']}" 
      File.open global[:authfile], 'w' do |f|
        f.puts 'penis'
      end
    end
  end
end

exit run(ARGV)
    
